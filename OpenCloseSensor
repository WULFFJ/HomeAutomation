#You can enter in an integer for values for a reed switch sensor.
#In my case, I used a Wemos D1 Mini
#This converts and sends in binary through a 433MHZ RF Transmitter

from machine import Pin, Timer
import time

# Pin connected to the RF transmitter
rf_pin = Pin(15, Pin.OUT)

# Time period (in microseconds) for one bit
bit_period = 10000

def decimal_to_binary(n):
    return ''.join(str((n >> i) & 1) for i in range(23, -1, -1))

# Codes for ON and OFF states
code_on_decimal = 123456789
code_off_decimal = 987654321

code_on = decimal_to_binary(code_on_decimal)
code_off = decimal_to_binary(code_off_decimal)

def send_bit(bit):
    if bit == '1':
        rf_pin.on()
    else:
        rf_pin.off()
    time.sleep_us(bit_period)

def send_code(code):
    for bit in code:
        send_bit(bit)
        time.sleep_us(bit_period)  # pause between bits

while True:
    value = Pin(5, Pin.IN).value()  # Read the reed switch value inside the loop
    if value == 1:
        send_code(code_on)
        print(code_on)
    else:
        send_code(code_off)
        print(code_off)
    time.sleep(1)  # pause between code transmissions
